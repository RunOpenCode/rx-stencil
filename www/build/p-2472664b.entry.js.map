{"version":3,"names":["of","args","scheduler","popScheduler","from","isObservable","obj","Observable","isFunction","lift","subscribe","switchMap","project","resultSelector","operate","source","subscriber","innerSubscriber","index","isComplete","checkComplete","complete","createOperatorSubscriber","value","unsubscribe","innerIndex","outerIndex","innerFrom","innerValue","next","asyncScss","Async","this","_value","connectedCallback","propertyObservable","pipe","Promise","setProperty","scheduleRender","nextTick","disconnectedCallback","render","h","Host"],"sources":["node_modules/rxjs/dist/esm/internal/observable/of.js","node_modules/rxjs/dist/esm/internal/util/isObservable.js","node_modules/rxjs/dist/esm/internal/operators/switchMap.js","src/components/async/async.scss?tag=rx-async","src/components/async/async.tsx"],"sourcesContent":["import { popScheduler } from '../util/args';\nimport { from } from './from';\nexport function of(...args) {\n    const scheduler = popScheduler(args);\n    return from(args, scheduler);\n}\n//# sourceMappingURL=of.js.map","import { Observable } from '../Observable';\nimport { isFunction } from './isFunction';\nexport function isObservable(obj) {\n    return !!obj && (obj instanceof Observable || (isFunction(obj.lift) && isFunction(obj.subscribe)));\n}\n//# sourceMappingURL=isObservable.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function switchMap(project, resultSelector) {\n    return operate((source, subscriber) => {\n        let innerSubscriber = null;\n        let index = 0;\n        let isComplete = false;\n        const checkComplete = () => isComplete && !innerSubscriber && subscriber.complete();\n        source.subscribe(createOperatorSubscriber(subscriber, (value) => {\n            innerSubscriber === null || innerSubscriber === void 0 ? void 0 : innerSubscriber.unsubscribe();\n            let innerIndex = 0;\n            const outerIndex = index++;\n            innerFrom(project(value, outerIndex)).subscribe((innerSubscriber = createOperatorSubscriber(subscriber, (innerValue) => subscriber.next(resultSelector ? resultSelector(value, innerValue, outerIndex, innerIndex++) : innerValue), () => {\n                innerSubscriber = null;\n                checkComplete();\n            })));\n        }, () => {\n            isComplete = true;\n            checkComplete();\n        }));\n    });\n}\n//# sourceMappingURL=switchMap.js.map",":host {\n    display: inline-block;\n}","import {\n    Component,\n    ComponentInterface,\n    h,\n    Host,\n    Prop,\n} from '@stencil/core';\nimport {\n    from,\n    isObservable,\n    Observable,\n    of,\n    switchMap,\n} from 'rxjs';\nimport {\n    propertyObservable,\n    setProperty,\n} from '../../rx';\n\nexport type AsyncValue = Promise<unknown> | Observable<unknown> | null | undefined;\n\n@Component({\n    tag:      'rx-async',\n    shadow:   false,\n    styleUrl: 'async.scss',\n})\nexport class Async implements ComponentInterface {\n\n    @Prop()\n    public value: AsyncValue = null;\n\n    private _value: unknown = null;\n\n    public connectedCallback(): void {\n        propertyObservable(this, 'value').pipe(\n            switchMap((value: AsyncValue): Observable<unknown> => {\n                if (isObservable(value)) {\n                    return value;\n                }\n\n                if (value instanceof Promise) {\n                    return from(value);\n                }\n\n                return of(value);\n            }),\n        ).subscribe(setProperty(this, '_value', {\n            scheduleRender: true,\n            nextTick:       false,\n        }));\n    }\n\n    public disconnectedCallback(): void {\n        // noop\n    }\n\n    public render(): any {\n        return (\n            <Host>\n                {this._value}\n            </Host>\n        )\n    }\n}"],"mappings":"0HAEO,SAASA,KAAMC,GAClB,MAAMC,EAAYC,EAAaF,GAC/B,OAAOG,EAAKH,EAAMC,EACtB,CCHO,SAASG,EAAaC,GACzB,QAASA,IAAQA,aAAeC,GAAeC,EAAWF,EAAIG,OAASD,EAAWF,EAAII,WAC1F,CCDO,SAASC,EAAUC,EAASC,GAC/B,OAAOC,GAAQ,CAACC,EAAQC,KACpB,IAAIC,EAAkB,KACtB,IAAIC,EAAQ,EACZ,IAAIC,EAAa,MACjB,MAAMC,EAAgB,IAAMD,IAAeF,GAAmBD,EAAWK,WACzEN,EAAOL,UAAUY,EAAyBN,GAAaO,IACnDN,IAAoB,MAAQA,SAAyB,OAAS,EAAIA,EAAgBO,cAClF,IAAIC,EAAa,EACjB,MAAMC,EAAaR,IACnBS,EAAUf,EAAQW,EAAOG,IAAahB,UAAWO,EAAkBK,EAAyBN,GAAaY,GAAeZ,EAAWa,KAAKhB,EAAiBA,EAAeU,EAAOK,EAAYF,EAAYD,KAAgBG,KAAa,KAChOX,EAAkB,KAClBG,GAAe,IACf,IACL,KACCD,EAAa,KACbC,GAAe,IAChB,GAEX,CCtBA,MAAMU,EAAY,8B,MC0BLC,EAAK,M,yBAKNC,KAAAC,OAAkB,K,WAFC,I,CAIpB,iBAAAC,GACHC,EAAmBH,KAAM,SAASI,KAC9BzB,GAAWY,IACP,GAAIlB,EAAakB,GAAQ,CACrB,OAAOA,C,CAGX,GAAIA,aAAiBc,QAAS,CAC1B,OAAOjC,EAAKmB,E,CAGhB,OAAOvB,EAAGuB,EAAM,KAEtBb,UAAU4B,EAAYN,KAAM,SAAU,CACpCO,eAAgB,KAChBC,SAAgB,Q,CAIjB,oBAAAC,G,CAIA,MAAAC,GACH,OACIC,EAACC,EAAI,KACAZ,KAAKC,O"}